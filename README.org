#+title: dired-git.el
#+author: Naoya Yamashita

[[https://github.com/conao3/dired-git.el][https://raw.githubusercontent.com/conao3/files/master/blob/headers/png/dired-git.el.png]]

[[https://github.com/conao3/dired-git.el/blob/master/LICENSE][https://img.shields.io/github/license/conao3/dired-git.el.svg?style=flat-square]]
[[https://github.com/conao3/dired-git.el/releases][https://img.shields.io/github/tag/conao3/dired-git.el.svg?style=flat-square]]
[[https://github.com/conao3/dired-git.el/actions][https://github.com/conao3/dired-git.el/workflows/Main%20workflow/badge.svg]]

Git integration for Emacs dired. Display branch names, ahead/behind counts, and perform batch Git operations directly from your directory listings.

* Features

- Display Git branch information alongside directory entries
- Show commits ahead/behind remote tracking branch
- Execute Git commands on multiple marked directories at once
- Asynchronous processing for responsive UI
- Integration with =all-the-icons= for visual indicators

* Screenshots

With =dired-git-mode= enabled:
[[https://raw.githubusercontent.com/conao3/files/master/blob/dired-git.el/dired-git.png]]

Combined with =dired-hide-details-mode=:
[[https://raw.githubusercontent.com/conao3/files/master/blob/dired-git.el/dired-git-summary.png]]

* Requirements

- Emacs 26.1 or later
- [[https://github.com/chuntaro/emacs-async-await][async-await]]
- [[https://github.com/jwiegley/emacs-async][async]]
- [[https://github.com/domtronn/all-the-icons.el][all-the-icons]]
- [[https://github.com/conao3/ppp.el][ppp]]

* Installation

** MELPA

Install =dired-git= from MELPA:

#+begin_src emacs-lisp
(use-package dired-git
  :hook (dired-mode . dired-git-mode))
#+end_src

** Manual

Clone the repository and add it to your load path:

#+begin_src emacs-lisp
(add-to-list 'load-path "/path/to/dired-git.el")
(require 'dired-git)
(add-hook 'dired-mode-hook 'dired-git-mode)
#+end_src

* Usage

Enable =dired-git-mode= in dired buffers to display Git information. The mode shows:

- Branch name with color coding (green for master/main, cyan for others)
- Number of commits ahead of remote (with + icon)
- Number of commits behind remote (with - icon)

** Batch Operations

Mark directories in dired and use these commands to operate on all of them:

| Key | Command                | Description                              |
|-----+------------------------+------------------------------------------|
| =   | =dired-git-dispatch=   | Prefix key for Git commands              |

Available commands:
- =dired-git-status= - Show git status
- =dired-git-fetch= - Fetch from all remotes
- =dired-git-pull= - Pull from remote
- =dired-git-push= - Push to remote
- =dired-git-stage= - Stage all changes
- =dired-git-unstage= - Unstage all changes
- =dired-git-commit= - Commit with message
- =dired-git-stash= - Stash changes
- =dired-git-stash-pop= - Pop stashed changes
- =dired-git-branch= - Switch branch
- =dired-git-merge= - Merge branch
- =dired-git-tag= - Create tag
- =dired-git-reset-hard= - Hard reset
- =dired-git-run= - Run arbitrary git command

* Configuration

** Exclude Directories

Disable Git information display for specific directories:

#+begin_src emacs-lisp
(setq dired-git-disable-dirs '("~/"))
#+end_src

** Parallel Processing

Control the number of parallel Git processes:

#+begin_src emacs-lisp
(setq dired-git-parallel 4)  ; default
#+end_src

* Contributing

Contributions are welcome. Please open an issue or submit a pull request on GitHub.

** Development Setup

1. Install [[https://github.com/cask/cask][Cask]] for dependency management
2. Run =make= to set up git hooks
3. Run =make test= to run the test suite

* License

GPL-3.0. See [[https://github.com/conao3/dired-git.el/blob/master/LICENSE][LICENSE]] for details.

Copyright (C) Naoya Yamashita
